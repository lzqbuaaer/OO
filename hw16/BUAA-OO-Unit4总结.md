# BUAA-OO-Unit4总结

第四单元的主题是UML，在这个单元中，我们学习了使用类图、顺序图、状态图等UML图来帮助我们对一个任务进行建模，有助于我们更好地把握整个代码的层次架构。

## 正向建模与开发

面向对象编程中的正向建模与开发是指通过分析需求，设计对象模型，然后将其转化为代码进行实现的过程。主要包括了**需求分析、设计对象模型、编码实现、测试验证、调试优化**等过程。

在我看来，正向规模的作用就在于在正式开工写代码之前，我们先通过建模的方式，对于要完成的代码有一个框架上的认知，这样就不会迷失在代码的诸多细节中。

本单元中，我在开始写代码之前，会先画一个简单的UML图。诚然，最后写出来的代码结构和事先画的UML图有一些不同，毕竟实现的过程中会出现很多意外情况，需要随时对方案作出调整，但是一个简单的UML图就足够帮助我把握整体架构了。

## 架构设计

![](D:\lzq123\oo\OO\hw16\uml.png)

本单元中，我们要实现一个小型图书馆系统，在我的架构中，`Library`类是核心，一些比较复杂的功能部件，比如借阅处、预约处、图书漂流角，作为单独的模块分离出来。而用户的信息以`PeopleTable`中`People`的形式进行存储。这样的设计总体上感觉还是不错的，既没有复杂的结构层次以及继承接口，也保留了一定的可扩展性。

### 代码设计和UML模型设计之间的追踪关系

在我看来，代码设计和UML模型设计之间的追踪关系是指UML图和代码之间能够一一对应，这其中不但包括了类中的属性方法对应，更重要的是类之间的关联关系等，这些关系能够反映出代码的结构层次。

在我的代码和UML的类图、状态图、顺序图中，我基本上做到了上述的一一对应。但是有些地方做的还是不够好，尤其是状态图和顺序图，很多不是特别重要的状态转移过程我都省略掉了，（虽然这样可以突出重点~~，还能大大减轻工作量~~）。

UML模型应当是编写代码的前置任务，在写代码的过程中，我们应当及时地更新代码和UML图中不一样的地方，对代码和UML图做同步调整，二者应当是相辅相成的，最终达到一一对应。当然，像我这么懒的人肯定是没有边写代码边修改UML的。

## 架构设计思维的演进

有一说一，我感觉还是一二单元对我的架构设计思维产生的影响比较大。

在oopre中，我感觉我的代码中还是有很多面向过程编程留下的痕迹。但是来到oo正课之后，这种情况就发生了改观。第一单元的层次化结构设计让我深刻感受到了面向对象的层次化设计风格。我使用继承、接口来统一管理不同的元素，思考表达式解析、计算、输出等不同部分的不同架构和实现方案，甚至于做一些简单的表达式化简。

第二单元是我第一次接触多线程，起初我感到十分手足无措，经过了一上午的java多线程基础知识学习之后，才有了基础的认知。多线程对架构的要求就更高了，在多级的生产者消费者模型中，我们要确保不同的线程能够按照我们所想象的正确运行。至于电梯的调度算法，影子电梯确实好用，但是当时也是花了整整半天才写了出来。

在前两个单元的作业中，我一般周一晚上都会花一些时间去理解题目，参考往届的博客，加上自己的思考，融会贯通成我自己的架构，在这个过程中，我感觉到我对面向对象中**高内聚、低耦合**等编程思想有了更深刻的理解。

第三单元主题是JML，这个单元我们的任务主要是根据规格去实现相应的方法，没什么需要考虑整体架构的地方。这个单元我收获最多的地方是学会使用了并查集。而第四单元就因为烤漆加上各种ddl，写的就比较应付了，好在这个单元重点在UML，代码任务比一二单元简单不少。

这四个单元对应了面向对象中的四个非常重要的部分。

* 层次化设计：通过合理的继承、接口、封装，对代码进行抽象，使代码结构更具层次化。
* 多线程设计：多个线程并行执行，效率更高，考察我们对于线程协同和线程安全的理解。
* 规格化设计：提高程序的安全性，使用juint对程序中的特定方法进行规格化的检查。
* 正向建模设计：使用UML图来辅助架构设计与实现。

## 测试思维的演进

不得不说，经过了一学期的OO，我还是学到了很多测试的方法。上学期的oopre中，我几乎写完代码都没怎么自己测试过，基本上就是过了中测就不管了。这个学期，我开始尝试不同的测试思路。

一般写完代码之后，我会先自己捏几组比较简单的样例，测试一下自己的代码的大体正确性，或者就先用指导书上给的几个测试样例。

之后使用评测机来大规模生成样例，反复测试代码的正确性。第一单元的三次作业我自己写了评测机，当时提高了自己代码的正确性，也在互测中发挥了强大作用，不过后来由于有现成的评测机可以白嫖，就没再写过了，还是自己太懒了。

最后我会做一些针对性的测试，比如第一单元中，重点测试一下化简算法是否正确；第二单元中，测试一下调度算法能不能处理短时间的大量请求；第三单元中，算法的效率如何。防止强测和互测中出现一些比较刁钻的错误或者tle的问题。

总的来说，我主要还是采用了黑箱测试的方法，总的来说效果还是比较好的。12次代码作业中，一共出现了三次bug，第二单元一次，第三单元两次，一共修改了四行就把bug改掉了，可见多么弱智。

## 课程收获

不知不觉，OO课程就这样结束了，在这门课程中，除了多线程、JML、UML，我认为收获最大的还是面向对象的思维和方法，在OO课中，我学会了层次化的代码架构，代码能力有了显著的提高。回顾一学期的OO经历，很多地方我其实还能做的更好，评测机没有坚持写下去，代码中出现了一些bug，后两个单元的任务完成的比较敷衍。不过总体来说，OO课程饿对自己还是比较满意的，也感谢大往届学长学姐们的博客，我从中学到了很多。

还记得四月的那一个晚上，对电梯调度算法十分不满意的我重写影子电梯，于凌晨三点完成，然后第二天早上八点从床上爬起来考蓝桥杯。都怪这”万恶“的OO和固执的自己。
